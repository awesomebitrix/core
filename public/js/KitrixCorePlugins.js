// Generated by CoffeeScript 1.12.3
(function() {
  var KitrixCorePlugins;

  $(function() {
    return window.KitrixCorePlugins = new KitrixCorePlugins();
  });

  KitrixCorePlugins = (function() {
    KitrixCorePlugins.params = null;

    function KitrixCorePlugins() {
      this.params = KitrixCorePluginsParams;
      return;
    }


    /*
      Enable plugin by ID
      @param id - PID of plugin (kitrix/core)
     */

    KitrixCorePlugins.prototype.enable = function(id) {};


    /*
      Disable plugin by ID
      @param id - PID of plugin (kitrix/core)
     */

    KitrixCorePlugins.prototype.disable = function(id) {
      var allow, plugin;
      plugin = this.params.plugins[id];
      allow = confirm("Вы действительно хотите выключить плагин " + plugin.title + "? Вы сможете включить его позже, все данные/файлы созданные плагином останутся. Если вы использовали API плагина, оно станет недоступно.");
      if (!allow) {
        return;
      }
      this.sRequest('disable', {
        pid: id
      }, function(isSuccess, response) {
        if (!isSuccess) {
          alert("Не удалось отключить плагин " + plugin.title + "!");
          return;
        }
        console.log("updated!", response);
      });
    };


    /*
      Remove plugin by ID with full data drop (+files unlink, +composer remove)
      @param id - PID of plugin (kitrix/core)
     */

    KitrixCorePlugins.prototype.remove = function(id) {};

    KitrixCorePlugins.prototype.sRequest = function(action, data, callback) {
      if (data == null) {
        data = {};
      }
      if (callback == null) {
        callback = null;
      }
      $.ajax({
        url: this.params.url,
        data: $.extend({
          action: action
        }, data),
        success: function(r) {
          return callback(true, r);
        },
        error: function(r) {
          return callback(false, r);
        }
      });
    };

    return KitrixCorePlugins;

  })();

}).call(this);

//# sourceMappingURL=KitrixCorePlugins.js.map
